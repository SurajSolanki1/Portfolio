<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>3D Solar System</title>
  <style>
    body { 
      margin: 0; 
      overflow: hidden;
      background-color: black;
    }
    canvas { 
      display: block; 
    }
    #loading-screen {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: #000;
      color: #fff;
      display: flex;
      justify-content: center;
      align-items: center;
      font-family: sans-serif;
      font-size: 2rem;
      z-index: 100;
      opacity: 1;
      transition: opacity 1s ease-in-out;
    }
    #loading-screen.fade-out {
      opacity: 0;
      pointer-events: none;
    }
  </style>
</head>
<body>
  <div id="loading-screen">Loading Assets...</div>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
  <script>
    // Create a loading manager to track asset loading
    const loadingManager = new THREE.LoadingManager();
    const loadingScreen = document.getElementById('loading-screen');

    loadingManager.onLoad = function () {
      // Hide the loading screen and start animation once all assets are loaded
      loadingScreen.classList.add('fade-out');
      animate();
    };

    // Set up scene, camera, and renderer
    const scene = new THREE.Scene();
    scene.background = new THREE.Color(0x000000); 
    const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
    const renderer = new THREE.WebGLRenderer();
    renderer.setSize(window.innerWidth, window.innerHeight);
    document.body.appendChild(renderer.domElement);

    // Add lighting
    const ambientLight = new THREE.AmbientLight(0xffffff, 0.2);
    scene.add(ambientLight);
    const pointLight = new THREE.PointLight(0xffffff, 1.5, 500);
    pointLight.position.set(0, 0, 0); 
    scene.add(pointLight);

    // Create a new texture loader with the loading manager
    const textureLoader = new THREE.TextureLoader(loadingManager);

    // Create the Sun
    const sunGeometry = new THREE.SphereGeometry(2, 32, 32);
    const sunTexture = textureLoader.load('sun_texture.jpg');
    const sunMaterial = new THREE.MeshBasicMaterial({ map: sunTexture });
    const sun = new THREE.Mesh(sunGeometry, sunMaterial);
    scene.add(sun);

    // Create planets with their textures
    const planets = [
      { name: 'Mercury', distance: 4, size: 0.2, texture: 'mercury_texture.jpg', speed: 0.004 },
      { name: 'Venus', distance: 6, size: 0.4, texture: 'venus_texture.jpg', speed: 0.003 },
      { name: 'Earth', distance: 8, size: 0.5, texture: 'earth_texture.jpg', speed: 0.002 },
      { name: 'Mars', distance: 10, size: 0.3, texture: 'mars_texture.jpg', speed: 0.0015 },
      { name: 'Jupiter', distance: 14, size: 1.2, texture: 'jupiter_texture.jpg', speed: 0.0008 },
      { name: 'Saturn', distance: 18, size: 1, texture: 'saturn_texture.jpg', speed: 0.0006 },
      { name: 'Uranus', distance: 22, size: 0.8, texture: 'uranus_texture.jpg', speed: 0.0004 },
      { name: 'Neptune', distance: 25, size: 0.7, texture: 'neptune_texture.jpg', speed: 0.0003 }
    ];

    // Create orbits and planets
    const orbits = new THREE.Group();
    planets.forEach(p => {
      // Create Planet
      const geometry = new THREE.SphereGeometry(p.size, 32, 32);
      const material = new THREE.MeshStandardMaterial({ map: textureLoader.load(p.texture) });
      const mesh = new THREE.Mesh(geometry, material);
      mesh.distance = p.distance;
      mesh.speed = p.speed;
      p.mesh = mesh;
      scene.add(mesh);

      // Create Orbit Line
      const orbitGeometry = new THREE.TorusGeometry(p.distance, 0.02, 16, 100);
      const orbitMaterial = new THREE.MeshBasicMaterial({ color: 0x555555, transparent: true, opacity: 0.5 });
      const orbit = new THREE.Mesh(orbitGeometry, orbitMaterial);
      orbit.rotation.x = Math.PI / 2; // Lay the orbit flat
      orbits.add(orbit);
    });
    scene.add(orbits);

    // Add Saturn's rings
    const saturnRingsGeometry = new THREE.RingGeometry(1.2, 1.8, 64);
    const saturnRingsTexture = textureLoader.load('saturn_rings_texture.png');
    const saturnRingsMaterial = new THREE.MeshBasicMaterial({ map: saturnRingsTexture, side: THREE.DoubleSide });
    const saturnRings = new THREE.Mesh(saturnRingsGeometry, saturnRingsMaterial);
    saturnRings.rotation.x = Math.PI / 2; 
    scene.add(saturnRings);

    camera.position.z = 30;

    // Animation loop (called by the loading manager)
    const animate = () => {
      requestAnimationFrame(animate);

      // Rotate the sun
      sun.rotation.y += 0.005;

      // Rotate and orbit the planets
      planets.forEach(p => {
        const time = Date.now() * p.speed;
        p.mesh.position.x = Math.cos(time) * p.distance;
        p.mesh.position.z = Math.sin(time) * p.distance;
        p.mesh.rotation.y += 0.01;
      });

      // Position Saturn's rings with Saturn
      const saturnMesh = planets.find(p => p.name === 'Saturn').mesh;
      saturnRings.position.copy(saturnMesh.position);

      renderer.render(scene, camera);
    };

    // Handle window resizing
    window.addEventListener('resize', () => {
      camera.aspect = window.innerWidth / window.innerHeight;
      camera.updateProjectionMatrix();
      renderer.setSize(window.innerWidth, window.innerHeight);
    });
  </script>
</body>
</html>
