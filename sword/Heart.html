<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>3D Heart</title>
    <style>
        body { margin: 0; background: #000; overflow: hidden; }
        canvas { display: block; }
    </style>
</head>
<body>
    <script src="https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.160.0/examples/js/loaders/FBXLoader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.160.0/examples/js/controls/OrbitControls.js"></script>

    <script>
        // Set up the scene, camera, and renderer
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 0.1, 1000);
        camera.position.set(0, 1.5, 4);

        const renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.toneMapping = THREE.ACESFilmicToneMapping;
        renderer.outputEncoding = THREE.sRGBEncoding;
        document.body.appendChild(renderer.domElement);

        // Add lighting
        const hemiLight = new THREE.HemisphereLight(0xffffff, 0x222222, 2);
        scene.add(hemiLight);

        const dirLight = new THREE.DirectionalLight(0xffffff, 2);
        dirLight.position.set(5, 10, 7.5);
        scene.add(dirLight);

        // Add OrbitControls for user interaction
        const controls = new THREE.OrbitControls(camera, renderer.domElement);
        controls.enableDamping = true;

        // Load textures and create the material
        const textureLoader = new THREE.TextureLoader();
        const baseColorMap = textureLoader.load('./hart_UV_low01_BaseColor.hart_UV_low_defaultMat.png');
        const normalMap = textureLoader.load('./hart_UV_low01_Normal.hart_UV_low_defaultMat.png');
        const roughnessMap = textureLoader.load('./hart_UV_low01_Roughness.hart_UV_low_defaultMat.png');
        const metalnessMap = textureLoader.load('./hart_UV_low01_Metalness.hart_UV_low_defaultMat.png');

        const heartMaterial = new THREE.MeshStandardMaterial({
            map: baseColorMap,
            normalMap: normalMap,
            roughnessMap: roughnessMap,
            metalnessMap: metalnessMap,
        });

        // Load the FBX model with the new name
        const loader = new THREE.FBXLoader();
        loader.load("./MH.fbx", (obj) => {
            obj.scale.set(0.02, 0.02, 0.02);
            obj.position.set(0, -1, 0);
            obj.traverse((child) => {
                if (child.isMesh) {
                    child.material = heartMaterial;
                }
            });
            scene.add(obj);
        }, undefined, (error) => {
            console.error('An error happened while loading the FBX file:', error);
        });

        // Handle window resizing
        window.addEventListener("resize", () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });

        // Animation loop
        function animate() {
            requestAnimationFrame(animate);
            controls.update();
            renderer.render(scene, camera);
        }
        animate();
    </script>
</body>
</html>
